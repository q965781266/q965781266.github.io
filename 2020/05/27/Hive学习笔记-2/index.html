<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hive学习笔记-2 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Hive与数据库的比较1. 查询语言HQL类似SQL 2. 数据存储位置Hive所有数据存储在HDFS中，而数据库的位置一般存在本地文件系统 3. 数据更新Hive针对数据仓库设计，而数据仓库的内容的读多写少的，因此Hive不建议对数据进行改写；而数据库中的数据通常要进行修改的。 4. 索引Hive加载数据时不对数据进行任何处理，因此也不会建立索引。 5 执行Hive大多数的查询执行通过MapRe">
<meta property="og:type" content="article">
<meta property="og:title" content="Hive学习笔记-2">
<meta property="og:url" content="http://yoursite.com/2020/05/27/Hive%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Hive与数据库的比较1. 查询语言HQL类似SQL 2. 数据存储位置Hive所有数据存储在HDFS中，而数据库的位置一般存在本地文件系统 3. 数据更新Hive针对数据仓库设计，而数据仓库的内容的读多写少的，因此Hive不建议对数据进行改写；而数据库中的数据通常要进行修改的。 4. 索引Hive加载数据时不对数据进行任何处理，因此也不会建立索引。 5 执行Hive大多数的查询执行通过MapRe">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-05-27T15:59:32.360Z">
<meta property="article:modified_time" content="2020-05-27T15:59:04.081Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Hive学习笔记-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/27/Hive%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/" class="article-date">
  <time datetime="2020-05-27T15:59:32.360Z" itemprop="datePublished">2020-05-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Hive学习笔记-2
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Hive与数据库的比较"><a href="#Hive与数据库的比较" class="headerlink" title="Hive与数据库的比较"></a>Hive与数据库的比较</h1><h2 id="1-查询语言"><a href="#1-查询语言" class="headerlink" title="1. 查询语言"></a>1. 查询语言</h2><p>HQL类似SQL</p>
<h2 id="2-数据存储位置"><a href="#2-数据存储位置" class="headerlink" title="2. 数据存储位置"></a>2. 数据存储位置</h2><p>Hive所有数据存储在HDFS中，而数据库的位置一般存在本地文件系统</p>
<h2 id="3-数据更新"><a href="#3-数据更新" class="headerlink" title="3. 数据更新"></a>3. 数据更新</h2><p>Hive针对数据仓库设计，而数据仓库的内容的读多写少的，因此Hive不建议对数据进行改写；而数据库中的数据通常要进行修改的。</p>
<h2 id="4-索引"><a href="#4-索引" class="headerlink" title="4. 索引"></a>4. 索引</h2><p>Hive加载数据时不对数据进行任何处理，因此也不会建立索引。</p>
<h2 id="5-执行"><a href="#5-执行" class="headerlink" title="5 执行"></a>5 执行</h2><p>Hive大多数的查询执行通过MapReduce实现，数据库通常有自己的执行引擎</p>
<h2 id="5-执行延迟"><a href="#5-执行延迟" class="headerlink" title="5. 执行延迟"></a>5. 执行延迟</h2><p>由于Hive查询数据没有索引，以及MapReduce本身具有较高的延迟，因此Hive查询有较高的延迟；相对数据库执行延迟较低。</p>
<h2 id="6-可扩展性"><a href="#6-可扩展性" class="headerlink" title="6. 可扩展性"></a>6. 可扩展性</h2><p>Hive基于Hadoop，Hive的可扩展性与Hadoop一致。而数据库的可扩展能力有限。</p>
<h2 id="7-数据规模"><a href="#7-数据规模" class="headerlink" title="7. 数据规模"></a>7. 数据规模</h2><p>Hive建立在集群可以利用MapReduce进行并行计算，因此可以支持大规模的数据，而数据库可以支持的数据规模较小。</p>
<h1 id="Hive数据类型"><a href="#Hive数据类型" class="headerlink" title="Hive数据类型"></a>Hive数据类型</h1><h2 id="1-基本数据类型"><a href="#1-基本数据类型" class="headerlink" title="1. 基本数据类型"></a>1. 基本数据类型</h2><table>
<thead>
<tr>
<th>Hive数据类型</th>
<th>Java数据类型</th>
</tr>
</thead>
<tbody><tr>
<td>TINYINT</td>
<td>byte</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>short</td>
</tr>
<tr>
<td>INT</td>
<td>int</td>
</tr>
<tr>
<td>BIGINT</td>
<td>long</td>
</tr>
<tr>
<td>BOOLEAN</td>
<td>boolean</td>
</tr>
<tr>
<td>FLOAT</td>
<td>float</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>double</td>
</tr>
<tr>
<td>STRING</td>
<td>string</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td></td>
</tr>
<tr>
<td>BINARY</td>
<td></td>
</tr>
</tbody></table>
<h2 id="2-集合数据类型"><a href="#2-集合数据类型" class="headerlink" title="2. 集合数据类型"></a>2. 集合数据类型</h2><p>STRUCT  C语言类似<br>MAP    Java类似<br>ARRAY    Java类似</p>
<p>create table test(<br>name string,<br>friends array<string>,<br>children map&lt;string, int&gt;,<br>address struct&lt;street:string, city:string&gt;<br>)<br>row format delimited fields terminated by ‘,’ –列分隔符<br>collection items terminated by ‘_’  –集合数据类型分隔符<br>map keys terminated by ‘:’  –MAP key与value分隔符<br>lines terminated by ‘\n’;  –行分隔符</p>
<h1 id="DDL数据定义-Data-Definition-Language"><a href="#DDL数据定义-Data-Definition-Language" class="headerlink" title="DDL数据定义(Data Definition Language)"></a>DDL数据定义(Data Definition Language)</h1><h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p>create database hive if not exists (location  ‘/hive.db’);</p>
<h2 id="查询数据库"><a href="#查询数据库" class="headerlink" title="查询数据库"></a>查询数据库</h2><h3 id="显示数据库"><a href="#显示数据库" class="headerlink" title="显示数据库"></a>显示数据库</h3><p>show databases (like ‘hive*’);</p>
<h3 id="查看数据库详情"><a href="#查看数据库详情" class="headerlink" title="查看数据库详情"></a>查看数据库详情</h3><p>desc database (extended) hive;</p>
<h3 id="切换数据库"><a href="#切换数据库" class="headerlink" title="切换数据库"></a>切换数据库</h3><p>ues hive;</p>
<h2 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h2><p>alter database hive set dpproperties(‘createtime’  = ‘20200527’);<br>不可以更改其他元数据信息包括数据库名和数据库所在目录位置</p>
<h2 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h2><p>drop database if exists hive (cascade);</p>
<h2 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h2><p>create [external] [if not exists] table table_name<br>[comment table_comment]<br>[partition by (col_name data_type [comment col_comment], …)]<br>[clustered by (col_name, col_name, …)<br>[sorted by (col_name [asc|desc],…)] into num_buckets buckets]<br>[row format row_format]<br>[stored as file_format]<br>[location hdfs_path]</p>
<p>like复制表结构</p>
<h2 id="内部表和外部表"><a href="#内部表和外部表" class="headerlink" title="内部表和外部表"></a>内部表和外部表</h2><p>管理表（内部表）由Hive自身管理，外部表由HDFS管理<br>内部表存储位置固定，外部表存储位置由用户自己决定<br>内部表删除会删除元数据和存储数据，外部表删除只会删除元数据，不会删除HDFS文件<br>对内部表的修改会同步到元数据，而修改外部表的表结构和分区，则需要z=执行修复命令msck repair table table_name;</p>
<h2 id="分区表"><a href="#分区表" class="headerlink" title="分区表"></a>分区表</h2><p>Hive分区就是分目录，把一个大的数据集根据业务需要分割成小的数据集，在查询时通过where字句中的表达式选择所需要的指定分区，提高查询效率</p>
<h3 id="增加分区"><a href="#增加分区" class="headerlink" title="增加分区"></a>增加分区</h3><p>alter table table_name add partition (month=’202005’) partition(month=’202004’);</p>
<h3 id="删除分区"><a href="#删除分区" class="headerlink" title="删除分区"></a>删除分区</h3><p>alter table table_name drop partition(month=’202005’), (month=’202004’);</p>
<h3 id="查看分区"><a href="#查看分区" class="headerlink" title="查看分区"></a>查看分区</h3><p>show partitions table_name;</p>
<h3 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h3><p>desc formatted table_name;</p>
<h2 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h2><h3 id="重命名表"><a href="#重命名表" class="headerlink" title="重命名表"></a>重命名表</h3><p>alter table table_name rename to new_table_name;</p>
<h3 id="增加修改替换列信息"><a href="#增加修改替换列信息" class="headerlink" title="增加修改替换列信息"></a>增加修改替换列信息</h3><p>alter table table_name add columns (deptdesc string);<br>alter table table_name change column deptdesc desc int;<br>alter table table_name replace columns (deptdesc string);<br>replace是对所有字段操作</p>
<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><p>drop table table_name;</p>
<h1 id="DML数据操作（Data-Managed-Language）"><a href="#DML数据操作（Data-Managed-Language）" class="headerlink" title="DML数据操作（Data Managed Language）"></a>DML数据操作（Data Managed Language）</h1><h2 id="数据倒入"><a href="#数据倒入" class="headerlink" title="数据倒入"></a>数据倒入</h2><h3 id="向表中装载数据-load"><a href="#向表中装载数据-load" class="headerlink" title="向表中装载数据(load)"></a>向表中装载数据(load)</h3><p>load data [loca] inpath ‘….’ overwrite|into table_name [partition(partcol = 1)]</p>
<p>local:本地orhdfs</p>
<h3 id="通过insert语句插入"><a href="#通过insert语句插入" class="headerlink" title="通过insert语句插入"></a>通过insert语句插入</h3><p>insert into|overwrite table table_name partition(month=’202005’) values(1, ‘wuyu’);<br>insert into|overwrite table table_name partition(month=’202005’)<br>          select id, name from student;</p>
<h2 id="清空表数据"><a href="#清空表数据" class="headerlink" title="清空表数据"></a>清空表数据</h2><p>truncate table student 只能操作内部表</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/27/Hive%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/" data-id="ckapjbpse0002owuif69da3yo" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2020/05/27/Hive%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hive学习笔记-1</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/05/27/Hive%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-2/">Hive学习笔记-2</a>
          </li>
        
          <li>
            <a href="/2020/05/27/Hive%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-1/">Hive学习笔记-1</a>
          </li>
        
          <li>
            <a href="/2020/05/26/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2%E6%96%87%E7%AB%A0/">我的第一篇博客文章</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>